# Pegasus metadata for Android App

There is no scraping tool for Android apps (yet) so creating the metadata file to launch Android apps from Pegasus is a manual process.

The `metadata.pegasus.txt` file should look the same way as any other for another platform, generated by Skyscraper. Pegasus needs a file per game, but unlike emulated systems there is no ROM to tie to. The easy solution is to create a file with the name of the game with a `.and` extension. With an Android collection set to scan the `.and` extensions, Pegasus will be able to find all the games we want to include.

The problem with this approach is that editing the metadata file gets confusing and tedious once there are more than a few games. 

I find it easier to do this:
 * keep the metadata of each game in its own file
 * add the artwork 
 * combine all the metadata fragments into the file needed by Pegasus

#### Metadata per game
Since we already have a `.and` file per game, let's use it for the metadata. 

Here is an example:

*AM2R: Return of Samus.and*
```
game: AM2R: Return of Samus
file: ./AM2R: Return of Samus.and
launch: am start -n com.lojical.AM2R/com.lojical.AM2R.RunnerActivity
developer: DoctorM64
genre: Action Adventure
description:
  Project AM2R aims to recreate Metroid II with updated graphics and gameplay. Taking elements from newer Metroid titles: the fast paced gameplay of Metroid: Zero Mission, the atmosphere and solitude of Super Metroid, and adding new game mechanics, AM2R is one of the most ambitious Metroid fan games. FEATURES: • Metroid Zero Mission-style gameplay • Map system • Updated enemy AI • Minibosses • New areas • Challenging Metroid fights • Stackable beam system • Completely redrawn enemy and Metroid sprites • Log system with non-intrusive narrative • High-quality soundtrack
```

The Automate flow included in this repo, App2Pegasus, lets you select an app and create a metadata file for the app with the launch command already filled in. The other details are left empty. You still have to complete the info manually.

The UpdateAndroidCollection has an option to create a skeleton metadata file. You will need to find the launch command using one of many apps listing apps and activities.
`UpdateAndroidCollection new "New Game"`

Do not link to the artwork in the .and file.

#### Adding the artwork
You need to provide the artwork yourself. There are two supported locations for the image files.

First possibility, and my prefered option, is to save the artwork in a directory of the same name as the game. Each file should be named for the asset it represents, for example `screenshot.png` or `video.mp4`. For the *boxFront* asset you can use the alias *cover*.

The other solution is to have directories for each asset type, `screenshots`, `wheels`, etc... Note the plural for the names. Each file should have the same base name as the game.

You can mix both methods if you want.
```
  Dead Cells.and
  Dead Cells/screenshot.jpg
  covers/Dead Cells.png
```

#### Creating the final metadata file
The UpdateAndroidCollection script combines all the `.and` files and links to the artwork. Just run the script from the command line:
```
UpdateAndroidCollection
```

Or launch the *Game Menu* script from a shortcut on your home screen and select the "Update Android Collection" option.

